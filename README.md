# بيانات شعبور

يحتوي هذا المستودع على الشفرة البرمجية التي يتم من خلالها تجهيز مجموعة بيانات مشروع شعبور.

*ملاحظة: تم تجربة الشفرة البرمجية على نظام تشغيل `Ubunutu 20.04` ونسخة `Python 3.8.8`.*

## هدف المستودع

الهدف من المستودع هو تجميع ومعالجة وترتيب البيانات من مختلف المواقع الشعرية المشهورة ليتم تدريب نماذج مشروع شعبور المختلفة باستخدامها.

## محتويات المستودع

```bash
sha3bor-data > المجلد الرئيسي للمستودع
├── data > يحتوي هذا المجلد على البيانات التي تم تجميعها ومجموعة البيانات بعد معالجتها وترتيبها
├── src > المجلد الأساسي للشفرة البرمجية
│   ├── crawl.py > الملف الذي من خلاله يتم تشغيل الشفرة البرمجية لجمع البيانات
│   ├── statistics.py > الملف الذي من خلاله يتم تشغيل الشفرة البرمجية لاحتساب الإحصائيات
│   ├── constants.py > الثوابت العامة في الشفرة البرمجية
│   ├── crawler.py > فئة مجردة تُمثِّل الشفرة البرمجية الأساسية لفئات تجميع البيانات
│   ├── stats.py > فئة مجردة تُمثِّل الشفرة البرمجية الأساسية لفئات احتساب الإحصائيات
│   ├── processor.py > فئة مجردة تُمثِّل الشفرة البرمجية الأساسية لفئات معالجة البيانات بعد التجميع
│   ├── era.py > فئة مجردة تُمثِّل الشفرة البرمجية الأساسية لفئات العصور الشعرية
│   ├── poet.py > فئة مجردة تُمثِّل الشفرة البرمجية الأساسية لفئات الشعراء
│   ├── poem.py > فئة مجردة تُمثِّل الشفرة البرمجية الأساسية لفئات القصائد
│   ├── adabworld > مجلد الشفرة البرمجية الخاصة بموقع عالم الأدب
│   │   ├── constants.py > الثوابت الخاصة بالشفرة البرمجية لموقع عالم الأدب
│   │   ├── adabworld_crawler.py > فئة تجميع ومعالجة البيانات لموقع عالم الأدب
│   │   ├── adabworld_stats.py > فئة احتساب إحصائيات البيانات لموقع عالم الأدب
│   │   ├── adabworld_processor.py > فئة معالجة البيانات بعد التجميع لموقع عالم الأدب
│   │   ├── adabworld_era.py > فئة تجميع ومعالجة العصور لموقع عالم الأدب
│   │   ├── adabworld_poet.py > فئة تجميع ومعالجة الشعراء لموقع عالم الأدب
│   │   └── adabworld_poem.py > فئة تجميع ومعالجة القصائد لموقع عالم الأدب
│   ├── aldiwan > مجلد الشفرة البرمجية الخاصة بموقع الديوان
│   │   └── محتويات المجلد مطابقة لمحتويات مجلد موقع عالم الأدب
│   ├── dctabudhabi > مجلد الشفرة البرمجية الخاصة بموقع الموسوعة الشعرية
│   │   └── محتويات المجلد مطابقة لمحتويات مجلد موقع عالم الأدب
│   └── utils > يحتوي هذا المجلد على مجموعة من الدوال المساعدة لإتمام مهام مختلفة
│       ├── process_utils.py > مجموعة الدوال المساعدة في عملية معالجة النصوص الشعرية
│       └── pw_utils.py > مجموعة الدوال المساعدة في عملية تجميع البيانات من المواقع الشعرية
├── LICENSE > رخصة استخدام الشفرة البرمجية والبيانات الموجودة في المستودع
├── README.md > الملف الذي تقرأه الآن :)
└── requirements.txt > ملف يحتوي على المكتبات المطلوبة لعمل الشفرة البرمجية
```

## مصطلحات

تم استخدام بعض المصطلحات داخل الشفرة البرمجية ورأيت أن أقوم بتوضيحها كي يسهل على القارئ فهم المقصود، وهذه هي المصطلحات:

- جامع البيانات: Crawler.
- عصر: Era.
- شاعر: Poet.
- قصيدة: Poem.
- الحركات أو التشكيلات: Diacritics.

## المتطلبات

### ما هي المكتبات التي سيتم تثبيتها؟

<div dir="rtl">

| المكتبة | الوصف |
| :---: | --- |
| [PyArabic](https://pypi.org/project/PyArabic) | مكتبة لمعاجلة النصوص العربية. |
| [beautifulsoup4](https://pypi.org/project/beautifulsoup4) | مكتبة لمعالجة صفحات الانترنت واستخراج البيانات منها. |
| [fake-useragent](https://pypi.org/project/fake-useragent) | مكتبة للحصول على User-Agent عشوائي في كل مرة يتم فيها استخدام المتصفح. |
| [playwright](https://pypi.org/project/playwright) | مكتبة لأتمتت عملية التعامل مع المتصفحات ومعالجة صفحات الانترنت. |
| [tqdm](https://pypi.org/project/tqdm) | مكتبة لعرض شريط التقدّم ومتابعة عملية جمع البيانات ومعالجتها. |

</div>

### تثبيت المكتبات

لتثبيت كامل المكتبات المطلوبة لتشغيل الشفرة البرمجية يجب عليك تنفيذ الأمر التالي:

```bash
sha3bor-data:~$ pip install -r requirements.txt
```

بعد ذلك يجب تثبيت محركات المتصفحات الخاصة بإطار عمل PlayWright من خلال تنفيذ الأمر التالي:

```bash
sha3bor-data:~$ playwright install
```

في حال واجهة أي مشاكل خلال تثبيت محركات المتصفحات الخاصة بإطار عمل PlayWright، يمكنك الإستعانة [بالتوثيق الرسمي](https://playwright.dev/python/docs/intro#installation) الخاص بالإطار.

## تشغيل الشفرة البرمجية

### تجميع البيانات

لتشغيل الشفرة البرمجية لتجميع البيانات يجب استخدام ملف `src/crawl.py` وتمرير قيَم المتغيرات المناسبة له.

على سبيل المثال، لنبدأ عملية جمع البيانات من موقع عالم الأدب، يمكننا تنفيذ الأمر التالي من المجلد الرئيسي للمستودع:

```bash
sha3bor-data:~$ python -m src.crawl --website adabworld
```

المتغيرات التي يمكن تمريرها للملف:

<div dir="rtl">

| المتغير | الوصف |
| :---: | --- |
| `website--` | الموقع الذي يجب جمع البيانات منه. |
| `no_headless--` | بتمرير هذا الخيار، سيتم إظهار صفحات المتصفح على الشاشة. يُنصح باستخدامه خلال عملية التطوير فقط. |
| `max_retries--` | العدد الأقصى من المحاولات لمعالجة صفحة معينة. |
| `sleep_time--` | المدة الزمنية التي يجب انتظارها قبل معالجة الصفحة التالية. يتم التعبير عن الرقم بوحدة الميلي ثانية. |

</div>

### إحتساب الإحصائيات

لتشغيل الشفرة البرمجية لاحتساب الإحصائيات يجب استخدام ملف `src/statistics.py` وتمرير قيَم المتغيرات المناسبة له.

على سبيل المثال، لنبدأ عملية احتساب الإحصائيات من موقع عالم الأدب، يمكننا تنفيذ الأمر التالي من المجلد الرئيسي للمستودع:

```bash
sha3bor-data:~$ python -m src.statistics --website adabworld
```

المتغيرات التي يمكن تمريرها للملف:

<div dir="rtl">

| المتغير | الوصف |
| :---: | --- |
| `website--` | الموقع الذي يجب احتساب الإحصائيات له. |

</div>

## المواقع المدعومة

يُمكن حاليًّا جمع البيانات من المواقع التالية:

- [عالم الأدب](https://adabworld.com) (adabworld).
- [الديوان](https://www.aldiwan.net) (aldiwan).
- [الموسوعة الشعرية](https://poetry.dctabudhabi.ae) (dctabudhabi).

## البيانات المجمّعة

في هذا القسم سيتم عرض إحصائيات خاصة بكل موقع من المواقع، ثم سيتم عرض إحصائيات عامة للبيانات المجمّعة بالكامل.

<details dir="rtl">
    <summary>عالم الأدب</summary>

#### إحصائيات تجميع البيانات

- الصفحات التي لم يتم معالجتها: 139
- الشعراء الذين لم يتم معالجتهم: 0
- العصور التي لم يتم معالجتها: 0
- الأخطاء المكتشفة في التشكيل: 26

#### إحصائيات البيانات

- عدد الأشطر: 576,082
- عدد الأبيات: 288,041
- عدد القصائد: 25,830
- عدد الشعراء: 98
- عدد العصور: 9
- عدد البحور: 43
- عدد الأبيات غير محددة البحر: 13,069
- عدد القصائد غير محددة البحر: 797
- عدد الأبيات المشطورة: 961
- عدد القصائد المشطورة: 331
- نسبة الحروف المشكلة: 37.35%
- عدد الأبيات المشكلة بنسبة أكثر من 24%: 207,569
- عدد الأبيات المشكلة بنسبة أكثر من 49%: 103,063
- عدد الأبيات المشكلة بنسبة أكثر من 74%: 2,813
</details>

<details dir="rtl">
    <summary>الديوان</summary>

#### إحصائيات تجميع البيانات

- الصفحات التي لم يتم معالجتها: 0
- الشعراء الذين لم يتم معالجتهم وتم مراسلة الموقع بشأنهم: 3
    - عامر الأنبوطي
    - الشرواني
    - الدمناتي
- العصور التي لم يتم معالجتها: 0
- الأخطاء المكتشفة في التشكيل: 307

#### إحصائيات البيانات

- عدد الأشطر: 2,807,176
- عدد الأبيات: 1,403,588
- عدد القصائد: 100,408
- عدد الشعراء: 980
- عدد العصور: 30
- عدد البحور: 65
- عدد الأبيات غير محددة البحر: 247,388
- عدد القصائد غير محددة البحر: 8,010
- عدد الأبيات المشطورة: 215,393
- عدد القصائد المشطورة: 6,438
- عدد الأنواع: 4
- عدد الأبيات غير محددة النوع: 24,258
- عدد القصائد غير محددة النوع: 1,351
- عدد المواضيع: 26
- عدد الأبيات غير محددة الموضوع: 24,714
- عدد القصائد غير محددة الموضوع: 1,379
- عدد القوافي: 38
- عدد الأبيات غير محددة القافية: 185,983
- عدد القصائد غير محددة القافية: 4,967
- نسبة الحروف المشكلة: 28.06%
- عدد الأبيات المشكلة بنسبة أكثر من 24%: 698,787
- عدد الأبيات المشكلة بنسبة أكثر من 49%: 288,955
- عدد الأبيات المشكلة بنسبة أكثر من 74%: 21,905
</details>

<details dir="rtl">
    <summary>الموسوعة الشعرية</summary>

*سيتم إضافة إحصائيات هذا الجزء لاحقًا.*

#### إحصائيات تجميع البيانات

#### إحصائيات البيانات

</details>

<details dir="rtl">
    <summary>كامل البيانات</summary>

الإحصائيات في هذا القسم تعبّر عن البيانات بعد تجميعها من المواقع بالكامل ودمج المشترك فيها ومعالجتها بالصورة النهائية.

*سيتم إضافة إحصائيات هذا الجزء لاحقًا.*

#### إحصائيات تجميع البيانات

#### إحصائيات البيانات

</details>

## إضافة موقع جديد

*سيتم إضافة هذا الجزء لاحقًا.*

## مشاكل معلومة

- طريقة جمع البيانات الحالية بطيئة وتستغرق وقت طويل بسبب استخدام متصفح حقيقي لفتح صفحات المواقع وجمع البيانات منها. تم استخدام هذا الأسلوب لكي لا يتم حجب الجهاز الذي يقوم بجمع البيانات من قبل المواقع. إذا كان هناك أي تحسينات، يمكن اقتراحها أو تعديل الشفرة البرمجية بشكل مباشر.
- إذا كانت القصيدة طويلة جدا مثل القصيدة الكافية الشافية لابن القيم الجوزية، فإن جامع البيانات قد يستغرق وقت طويل في معالجتها وقد لا يتمكن من ذلك. لا يوجد حل لهذه المشكلة حاليا، إذا كان هناك أي اقتراحات، يمكن مشاركتها أو التعديل على الشفرة البرمجية بشكل مباشر.
- الشفرة البرمجية تعتمد بشكل كبير على إطار عمل PlayWright وهذا قد يُبطئ عملية تحسين الشفرة البرمجية في حال أردنا تغيير طريقة عملية جمع البيانات.

## قائمة المهمات

القائمة التالية من المهمات تم ترتيبها حسب الأولوية:
- مراجعة وترتيب وتنظيف الشفرة البرمجية (مهمة دائمة).
- إضافة كافة المعلومات لملف `README.md` (مهمة دائمة).
- إضافة الشفرة البرمجية الخاصة بجمع بيانات المواقع المختلفة في مجموعة بيانات واحدة.
- إضافة دعم للمواقع التالية:
  - [الديوان العربي](http://www.aldiwanalarabi.com)
  - [بوابة الشعراء](https://poetsgate.com)
  - [ديواني](https://diwany.org)
  - [أدب](https://www.adab.com)
- دمج مجموعة البيانات مع مجموعات البيانات التالية:
  - [Arabic Poem Comprehensive Dataset](https://hci-lab.github.io/LearningMetersPoems)
  - [ashaar](https://huggingface.co/datasets/MagedSaeed/ashaar)
- إضافة وحدات الاختبار للشفرة البرمجية.
- محاولة حل المشاكل المعلومة.
